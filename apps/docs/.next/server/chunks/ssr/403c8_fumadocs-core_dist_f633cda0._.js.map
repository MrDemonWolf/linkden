{"version":3,"sources":["../../../../../../node_modules/.pnpm/fumadocs-core%4016.5.1_%40types%2Breact%4019.2.14_lucide-react%400.563.0_react%4019.2.4__next%4016.1._fd22a10c0eda7afe97c95df49fe9bbd3/node_modules/fumadocs-core/dist/search-BBwdBAje.js","../../../../../../node_modules/.pnpm/fumadocs-core%4016.5.1_%40types%2Breact%4019.2.14_lucide-react%400.563.0_react%4019.2.4__next%4016.1._fd22a10c0eda7afe97c95df49fe9bbd3/node_modules/fumadocs-core/dist/remove-undefined-DRuHyD77.js","../../../../../../node_modules/.pnpm/fumadocs-core%4016.5.1_%40types%2Breact%4019.2.14_lucide-react%400.563.0_react%4019.2.4__next%4016.1._fd22a10c0eda7afe97c95df49fe9bbd3/node_modules/fumadocs-core/dist/advanced-TWQmNf5Z.js","../../../../../../node_modules/.pnpm/fumadocs-core%4016.5.1_%40types%2Breact%4019.2.14_lucide-react%400.563.0_react%4019.2.4__next%4016.1._fd22a10c0eda7afe97c95df49fe9bbd3/node_modules/fumadocs-core/dist/static-Dt2cKb--.js"],"sourcesContent":["//#region src/search/index.ts\nfunction escapeRegExp(input) {\n\treturn input.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction buildRegexFromQuery(q) {\n\tconst trimmed = q.trim();\n\tif (trimmed.length === 0) return null;\n\tconst terms = Array.from(new Set(trimmed.split(/\\s+/).map((t) => t.trim()).filter(Boolean)));\n\tif (terms.length === 0) return null;\n\tconst escaped = terms.map(escapeRegExp).join(\"|\");\n\treturn new RegExp(`(${escaped})`, \"gi\");\n}\nfunction createContentHighlighter(query) {\n\tconst regex = typeof query === \"string\" ? buildRegexFromQuery(query) : query;\n\treturn { highlight(content) {\n\t\tif (!regex) return [{\n\t\t\ttype: \"text\",\n\t\t\tcontent\n\t\t}];\n\t\tconst out = [];\n\t\tlet i = 0;\n\t\tfor (const match of content.matchAll(regex)) {\n\t\t\tif (i < match.index) out.push({\n\t\t\t\ttype: \"text\",\n\t\t\t\tcontent: content.substring(i, match.index)\n\t\t\t});\n\t\t\tout.push({\n\t\t\t\ttype: \"text\",\n\t\t\t\tcontent: match[0],\n\t\t\t\tstyles: { highlight: true }\n\t\t\t});\n\t\t\ti = match.index + match[0].length;\n\t\t}\n\t\tif (i < content.length) out.push({\n\t\t\ttype: \"text\",\n\t\t\tcontent: content.substring(i)\n\t\t});\n\t\treturn out;\n\t} };\n}\n\n//#endregion\nexport { createContentHighlighter as t };","//#region src/utils/remove-undefined.ts\nfunction removeUndefined(value, deep = false) {\n\tconst obj = value;\n\tfor (const key in obj) {\n\t\tif (obj[key] === void 0) delete obj[key];\n\t\tif (!deep) continue;\n\t\tconst entry = obj[key];\n\t\tif (typeof entry === \"object\" && entry !== null) {\n\t\t\tremoveUndefined(entry, deep);\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(entry)) for (const item of entry) removeUndefined(item, deep);\n\t}\n\treturn value;\n}\n\n//#endregion\nexport { removeUndefined as t };","import { t as createContentHighlighter } from \"./search-BBwdBAje.js\";\nimport { t as removeUndefined } from \"./remove-undefined-DRuHyD77.js\";\nimport { getByID, search } from \"@orama/orama\";\n\n//#region src/search/orama/search/simple.ts\nasync function searchSimple(db, query, params = {}) {\n\tconst highlighter = createContentHighlighter(query);\n\treturn (await search(db, {\n\t\tterm: query,\n\t\ttolerance: 1,\n\t\t...params,\n\t\tboost: {\n\t\t\ttitle: 2,\n\t\t\t...\"boost\" in params ? params.boost : void 0\n\t\t}\n\t})).hits.map((hit) => ({\n\t\ttype: \"page\",\n\t\tcontent: hit.document.title,\n\t\tbreadcrumbs: hit.document.breadcrumbs,\n\t\tcontentWithHighlights: highlighter.highlight(hit.document.title),\n\t\tid: hit.document.url,\n\t\turl: hit.document.url\n\t}));\n}\n\n//#endregion\n//#region src/search/orama/search/advanced.ts\nasync function searchAdvanced(db, query, tag = [], { mode = \"fulltext\", ...override } = {}) {\n\tif (typeof tag === \"string\") tag = [tag];\n\tlet params = {\n\t\t...override,\n\t\tmode,\n\t\twhere: removeUndefined({\n\t\t\ttags: tag.length > 0 ? { containsAll: tag } : void 0,\n\t\t\t...override.where\n\t\t}),\n\t\tgroupBy: {\n\t\t\tproperties: [\"page_id\"],\n\t\t\tmaxResult: 8,\n\t\t\t...override.groupBy\n\t\t}\n\t};\n\tif (query.length > 0) params = {\n\t\t...params,\n\t\tterm: query,\n\t\tproperties: mode === \"fulltext\" ? [\"content\"] : [\"content\", \"embeddings\"]\n\t};\n\tconst highlighter = createContentHighlighter(query);\n\tconst result = await search(db, params);\n\tconst list = [];\n\tfor (const item of result.groups ?? []) {\n\t\tconst pageId = item.values[0];\n\t\tconst page = getByID(db, pageId);\n\t\tif (!page) continue;\n\t\tlist.push({\n\t\t\tid: pageId,\n\t\t\ttype: \"page\",\n\t\t\tcontent: page.content,\n\t\t\tbreadcrumbs: page.breadcrumbs,\n\t\t\tcontentWithHighlights: highlighter.highlight(page.content),\n\t\t\turl: page.url\n\t\t});\n\t\tfor (const hit of item.result) {\n\t\t\tif (hit.document.type === \"page\") continue;\n\t\t\tlist.push({\n\t\t\t\tid: hit.document.id.toString(),\n\t\t\t\tcontent: hit.document.content,\n\t\t\t\tbreadcrumbs: hit.document.breadcrumbs,\n\t\t\t\tcontentWithHighlights: highlighter.highlight(hit.document.content),\n\t\t\t\ttype: hit.document.type,\n\t\t\t\turl: hit.document.url\n\t\t\t});\n\t\t}\n\t}\n\treturn list;\n}\n\n//#endregion\nexport { searchSimple as n, searchAdvanced as t };","import { n as searchSimple, t as searchAdvanced } from \"./advanced-TWQmNf5Z.js\";\nimport { create, load } from \"@orama/orama\";\n\n//#region src/search/client/static.ts\nconst cache = /* @__PURE__ */ new Map();\nasync function loadDB({ from = \"/api/search\", initOrama = (locale) => create({\n\tschema: { _: \"string\" },\n\tlanguage: locale\n}) }) {\n\tconst cacheKey = from;\n\tconst cached = cache.get(cacheKey);\n\tif (cached) return cached;\n\tasync function init() {\n\t\tconst res = await fetch(from);\n\t\tif (!res.ok) throw new Error(`failed to fetch exported search indexes from ${from}, make sure the search database is exported and available for client.`);\n\t\tconst data = await res.json();\n\t\tconst dbs = /* @__PURE__ */ new Map();\n\t\tif (data.type === \"i18n\") {\n\t\t\tawait Promise.all(Object.entries(data.data).map(async ([k, v]) => {\n\t\t\t\tconst db$1 = await initOrama(k);\n\t\t\t\tload(db$1, v);\n\t\t\t\tdbs.set(k, {\n\t\t\t\t\ttype: v.type,\n\t\t\t\t\tdb: db$1\n\t\t\t\t});\n\t\t\t}));\n\t\t\treturn dbs;\n\t\t}\n\t\tconst db = await initOrama();\n\t\tload(db, data);\n\t\tdbs.set(\"\", {\n\t\t\ttype: data.type,\n\t\t\tdb\n\t\t});\n\t\treturn dbs;\n\t}\n\tconst result = init();\n\tcache.set(cacheKey, result);\n\treturn result;\n}\nasync function search(query, options) {\n\tconst { tag, locale } = options;\n\tconst db = (await loadDB(options)).get(locale ?? \"\");\n\tif (!db) return [];\n\tif (db.type === \"simple\") return searchSimple(db, query);\n\treturn searchAdvanced(db.db, query, tag);\n}\n\n//#endregion\nexport { search };"],"names":[],"mappings":"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","ignoreList":[0,1,2,3]}