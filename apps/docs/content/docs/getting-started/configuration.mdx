---
title: Configuration
description: Configure Better Auth, Cloudflare services, and environment variables for your LinkDen instance.
---

# Configuration

LinkDen uses a minimal set of environment variables. Most configuration (email, CAPTCHA, branding, etc.) is managed through the admin settings UI and stored in the database.

## Environment Variables

The root `.env` file contains all required variables:

| Variable | Description | Example | Required |
|----------|-------------|---------|----------|
| `BETTER_AUTH_SECRET` | Secret key for session signing | `your-secret-key-here` | Yes |
| `BETTER_AUTH_URL` | Base URL for the auth server | `http://localhost:3000` | Yes |
| `CORS_ORIGIN` | Allowed CORS origin (frontend URL) | `http://localhost:3001` | Yes |
| `NEXT_PUBLIC_SERVER_URL` | Public URL of the API server | `http://localhost:3000` | Yes |

Copy the example file to get started:

```bash
cp .env.example .env
```

## Better Auth Setup

LinkDen uses [Better Auth](https://www.better-auth.com/) for authentication with email/password sign-in. No external auth service is needed.

### How It Works

1. During the setup wizard at `/admin/setup`, you create an admin account with email and password.
2. Better Auth creates a session with secure cookies (`sameSite: none`, `secure: true`, `httpOnly: true`).
3. All admin API routes are protected by Better Auth session validation.
4. The session cookie is sent cross-origin between the Next.js frontend and the Hono API server.

### Generating a Secret

Generate a strong secret for `BETTER_AUTH_SECRET`:

```bash
openssl rand -base64 32
```

### Setting the URLs

- `BETTER_AUTH_URL` should point to your API server (where Better Auth runs).
- `CORS_ORIGIN` should point to your web frontend.
- `NEXT_PUBLIC_SERVER_URL` should match `BETTER_AUTH_URL` (the API server URL).

For local development:

```bash
BETTER_AUTH_SECRET=your-generated-secret
BETTER_AUTH_URL=http://localhost:3000
CORS_ORIGIN=http://localhost:3001
NEXT_PUBLIC_SERVER_URL=http://localhost:3000
```

For production:

```bash
BETTER_AUTH_SECRET=your-production-secret
BETTER_AUTH_URL=https://api.yourdomain.com
CORS_ORIGIN=https://yourdomain.com
NEXT_PUBLIC_SERVER_URL=https://api.yourdomain.com
```

## Runtime Configuration (Admin Settings)

Most configuration is managed through the admin settings page (`/admin/settings`) and stored in the database. This includes:

- **Email provider** -- Resend or Cloudflare Email Workers (API key, from address).
- **CAPTCHA** -- Cloudflare Turnstile or Google reCAPTCHA (site key, secret key).
- **Branding** -- Whitelabel footer text and link.
- **vCard** -- Contact card enable/disable.
- **Apple Wallet** -- Team ID, Pass Type ID, custom QR URL.
- **SEO** -- Page title, meta description, OG image.

This approach keeps the `.env` file minimal and makes it easy to change settings without redeploying.

## Cloudflare Setup

For deployment to Cloudflare, you need:

1. A free account at [cloudflare.com](https://cloudflare.com).
2. A **Cloudflare API Token** with permissions for Workers, Pages, and D1.
3. Your **Cloudflare Account ID** (found on the right sidebar of the dashboard overview).

These are used by the Alchemy deployment tool. See [Deployment](/docs/getting-started/deployment) for details.

## Next Steps

- [Cloudflare Deployment](/docs/self-hosting/cloudflare) -- Deploy your configured instance to Cloudflare.
- [Quick Start](/docs/getting-started/quick-start) -- Configure all runtime settings through the admin panel.
