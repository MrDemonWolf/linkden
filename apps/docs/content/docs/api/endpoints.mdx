---
title: API Endpoints
description: Complete reference for all LinkDen tRPC API procedures.
---

# API Endpoints

LinkDen exposes tRPC procedures organized into 10 routers plus a top-level health check. All endpoints are available at `/trpc/<router>.<procedure>`.

Public procedures require no authentication. Protected procedures require a valid Better Auth session cookie.

---

## Blocks

Manage content blocks on your page.

| Procedure | Type | Auth | Description |
|-----------|------|------|-------------|
| `blocks.list` | Query | Protected | Get all blocks ordered by position |
| `blocks.get` | Query | Protected | Get a single block by ID |
| `blocks.create` | Mutation | Protected | Create a new block with client-generated ID |
| `blocks.update` | Mutation | Protected | Update block fields by ID |
| `blocks.delete` | Mutation | Protected | Delete a block by ID |
| `blocks.reorder` | Mutation | Protected | Batch update block positions |
| `blocks.toggleEnabled` | Mutation | Protected | Toggle `isEnabled` field |

### Block Types

```typescript
type BlockType = "link" | "header" | "social_icons" | "embed" | "contact_form"
```

### Block Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Unique block ID |
| `type` | BlockType | Block type |
| `title` | string | Display title |
| `url` | string? | Destination URL (link blocks) |
| `icon` | string? | Icon identifier |
| `embedType` | string? | Embed provider (YouTube, Spotify, SoundCloud, Custom) |
| `embedUrl` | string? | Embed source URL |
| `socialIcons` | string? | JSON string of social icon data |
| `isEnabled` | boolean | Visibility on public page |
| `position` | number | Display order |
| `scheduledStart` | string? | ISO datetime for scheduled visibility start |
| `scheduledEnd` | string? | ISO datetime for scheduled visibility end |
| `config` | string? | JSON string of block configuration |

---

## Settings

Manage site-wide key-value configuration.

| Procedure | Type | Auth | Description |
|-----------|------|------|-------------|
| `settings.get` | Query | Protected | Get a single setting by key |
| `settings.getAll` | Query | Protected | Get all settings as key-value map |
| `settings.update` | Mutation | Protected | Upsert a single key-value pair |
| `settings.updateBulk` | Mutation | Protected | Upsert an array of key-value pairs |

### Common Settings Keys

| Key | Description |
|-----|-------------|
| `profile_name` | Display name |
| `bio` | Bio text |
| `avatar_url` | Avatar image URL |
| `verified_badge` | Show verified checkmark |
| `theme_preset` | Theme ID (e.g., `default`, `hacker-terminal`) |
| `seo_title` | Page title |
| `seo_description` | Meta description |
| `seo_og_image` | Open Graph image URL |
| `contact_form_enabled` | Contact form toggle |
| `contact_delivery` | Delivery mode (`database only`, `email notification`, `database + email`) |
| `captcha_provider` | CAPTCHA mode (`none`, `Cloudflare Turnstile`, `Google reCAPTCHA`) |
| `captcha_site_key` | CAPTCHA public key |
| `captcha_secret_key` | CAPTCHA server key |
| `email_provider` | Email service (`Resend`, `Cloudflare Email Workers`) |
| `branding_enabled` | Whitelabel footer toggle |
| `branding_text` | Custom footer text |
| `branding_link` | Custom footer link |
| `vcard_enabled` | vCard download toggle |
| `wallet_enabled` | Apple Wallet toggle |
| `setup_completed` | Setup wizard completion flag |

---

## Contacts

Handle contact form submissions.

| Procedure | Type | Auth | Description |
|-----------|------|------|-------------|
| `contacts.list` | Query | Protected | List submissions with optional `isRead` filter, limit/offset pagination |
| `contacts.get` | Query | Protected | Get a single submission by ID |
| `contacts.markRead` | Mutation | Protected | Mark submission as read |
| `contacts.markUnread` | Mutation | Protected | Mark submission as unread |
| `contacts.delete` | Mutation | Protected | Delete a submission |
| `contacts.unreadCount` | Query | Protected | Count of unread submissions |

---

## Analytics

Track and query page view and click data. All queries accept an optional `{ period: "7d" | "30d" | "90d" }` parameter.

| Procedure | Type | Auth | Description |
|-----------|------|------|-------------|
| `analytics.overview` | Query | Protected | Returns `{ totalViews, totalClicks }` for period |
| `analytics.viewsOverTime` | Query | Protected | Returns `[{ date, count }]` grouped by day |
| `analytics.clicksOverTime` | Query | Protected | Returns `[{ date, count }]` grouped by day |
| `analytics.topLinks` | Query | Protected | Top 10 links by click count |
| `analytics.referrers` | Query | Protected | Top 10 referrer domains |
| `analytics.countries` | Query | Protected | Top 20 countries by page view count |

---

## Social

Manage social network entries for use in Social Icons blocks.

| Procedure | Type | Auth | Description |
|-----------|------|------|-------------|
| `social.list` | Query | Protected | List all networks with optional `activeOnly` filter |
| `social.toggle` | Mutation | Protected | Set `isActive` true/false for a network by slug |

---

## Wallet

Manage Apple Wallet pass configuration.

| Procedure | Type | Auth | Description |
|-----------|------|------|-------------|
| `wallet.getConfig` | Query | Protected | Get wallet settings (enabled, teamId, passTypeId, customQrUrl) |
| `wallet.updateConfig` | Mutation | Protected | Update wallet settings |
| `wallet.generatePreview` | Query | Protected | Returns profile + enabled blocks + QR URL for pass preview |

---

## vCard

Manage and generate vCard contact files.

| Procedure | Type | Auth | Description |
|-----------|------|------|-------------|
| `vcard.getConfig` | Query | Protected | Get `{ enabled, data }` |
| `vcard.updateConfig` | Mutation | Protected | Update enabled flag and/or vCard data fields |
| `vcard.preview` | Query | Protected | Returns generated `.vcf` string |

### vCard Data Fields

`fullName`, `nickname`, `birthday`, `photo`, `org`, `title`, `department`, `workEmail`, `workPhone`, `email`, `phone`, `address`, `urls` (array of `{ label, url }`).

---

## Backup

Import and export all data.

| Procedure | Type | Auth | Description |
|-----------|------|------|-------------|
| `backup.export` | Query | Protected | Export all data as JSON (blocks, settings, socialNetworks, contactSubmissions) |
| `backup.import` | Mutation | Protected | Import data with `mode: "merge"` or `"replace"` |

---

## Version

| Procedure | Type | Auth | Description |
|-----------|------|------|-------------|
| `version.current` | Query | Public | Returns `{ version }` |
| `version.checkUpdate` | Query | Public | Returns `{ current, latest, hasUpdate, releaseUrl, changelog }` |

---

## Public

Public-facing endpoints (no authentication).

| Procedure | Type | Description |
|-----------|------|-------------|
| `public.getPage` | Query | Full page data: profile, schedule-filtered blocks, theme, settings |
| `public.submitContact` | Mutation | Submit contact form; validates CAPTCHA if configured; stores to DB |
| `public.trackView` | Mutation | Record page view with referrer, userAgent, country |
| `public.trackClick` | Mutation | Record link click with blockId, referrer, userAgent, country |
| `public.getVCard` | Query | Returns VCard string if vcard is enabled |
| `public.getSetupStatus` | Query | Returns `{ completed: boolean }` |
