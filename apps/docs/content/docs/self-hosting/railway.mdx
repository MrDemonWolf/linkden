---
title: Railway Deployment
description: Deploy LinkDen on Railway with automatic builds, SSL, and managed infrastructure.
---

# Railway Deployment

Deploy LinkDen on [Railway](https://railway.app) — a cloud platform that handles builds, SSL, and infrastructure for you. Connect your GitHub repo and Railway takes care of the rest.

## Architecture

Railway runs each service as a separate container with a persistent volume for the SQLite database:

```
┌──────────────────┐     ┌──────────────────┐     ┌──────────────┐
│  Railway Service: │────▶│  Railway Service: │────▶│ Volume Mount │
│  Web (Next.js    │     │  API (Hono on     │     │ (SQLite DB)  │
│  static + Caddy) │     │  Node.js)         │     │              │
└──────────────────┘     └──────────────────┘     └──────────────┘
```

## Prerequisites

1. A [Railway account](https://railway.app) (GitHub sign-in recommended)
2. The LinkDen repository forked to your GitHub account
3. Node.js 20+ and pnpm 9+ installed locally (for initial setup)

## Step 1: Create a Railway Project

1. Log in to the [Railway dashboard](https://railway.app/dashboard).
2. Click **New Project** > **Empty Project**.
3. Name it `LinkDen`.

## Step 2: Deploy the API Service

1. Click **New** > **GitHub Repo** and select the LinkDen repository.
2. Cancel the initial build — you need to configure it first.
3. Open the service settings:
   - **Service Name**: `linkden-api`
   - **Dockerfile Path**: `Dockerfile.api`

> **Tip:** If you haven't created `Dockerfile.api` yet, see the [Docker guide](/docs/self-hosting/docker) for the complete Dockerfile and Node.js entry point setup.

### Add a Persistent Volume

1. Click the `linkden-api` service > **Volumes** > **New Volume**.
2. Set the mount path to `/data`.
3. Click **Create**.

### Set Environment Variables

Go to the service > **Variables** and add:

| Variable | Value |
|----------|-------|
| `BETTER_AUTH_SECRET` | Generate with `openssl rand -base64 32` |
| `BETTER_AUTH_URL` | `https://linkden-api-production.up.railway.app` (or your custom domain) |
| `CORS_ORIGIN` | `https://yourdomain.com` (update after custom domain setup) |
| `DATABASE_URL` | `file:/data/linkden.db` |
| `PORT` | `8787` |
| `RESEND_API_KEY` | `re_...` (optional) |
| `RESEND_FROM_EMAIL` | `contact@yourdomain.com` (optional) |
| `TURNSTILE_SECRET_KEY` | `0x...` (optional) |

### Expose the Service

Go to **Settings** > **Networking** > **Public Networking** and click **Generate Domain**. Note this URL — you'll need it for the web app.

## Step 3: Deploy the Web App

1. Click **New** > **GitHub Repo** and select the LinkDen repository again.
2. Configure:
   - **Service Name**: `linkden-web`
   - **Dockerfile Path**: `Dockerfile.web`

### Set Build Variables

`NEXT_PUBLIC_*` variables must be present at build time:

| Variable | Value |
|----------|-------|
| `NEXT_PUBLIC_SERVER_URL` | `https://linkden-api-production.up.railway.app` (or your custom domain) |
| `NEXT_PUBLIC_SITE_URL` | `https://linkden-web-production.up.railway.app` (or your custom domain) |
| `NEXT_PUBLIC_SITE_NAME` | `LinkDen` |
| `NEXT_PUBLIC_TURNSTILE_SITE_KEY` | (optional) |
| `PORT` | `3001` |

### Expose the Service

Generate a public domain under **Settings** > **Networking**.

## Step 4: Custom Domains

1. Click the service > **Settings** > **Networking** > **Custom Domain**.
2. Enter your domain (e.g., `yourdomain.com` for web, `api.yourdomain.com` for API).
3. Add the CNAME record Railway shows you at your DNS provider:

| Type | Name | Target |
|------|------|--------|
| CNAME | `@` or subdomain | `linkden-web-production.up.railway.app` |
| CNAME | `api` | `linkden-api-production.up.railway.app` |

After adding domains, update the environment variables on both services:

**API service:**
```
CORS_ORIGIN=https://yourdomain.com
BETTER_AUTH_URL=https://api.yourdomain.com
```

**Web service:**
```
NEXT_PUBLIC_SERVER_URL=https://api.yourdomain.com
NEXT_PUBLIC_SITE_URL=https://yourdomain.com
```

Redeploy both services for the changes to take effect. Railway handles SSL automatically.

## Step 5: First-Time Setup

1. Check the API service logs (service > **Deployments** > latest > **Logs**) for the setup URL:
   ```
   Setup URL: https://yourdomain.com/admin/setup?token=<unique-token>
   ```
2. Open the URL and create your admin account.
3. Sign in at `/admin/login` and create a test link to verify everything works.

## Updating

If your repo is connected via GitHub, Railway automatically redeploys when you push to the configured branch — zero downtime.

To roll back a bad deploy: go to the service > **Deployments**, find the previous working deployment, and click **Rollback**.

## Monitoring

- **Logs**: Service > **Deployments** > latest > **Logs**
- **Metrics**: CPU, memory, network, and disk usage are available on the service dashboard
- **Notifications**: Configure deploy notifications under **Project Settings** > **Integrations** (email, Slack, webhooks)

## Cost

| Plan | Cost | Included |
|------|------|----------|
| **Trial** | Free ($5 credit/month) | 512 MB RAM, shared CPU, 1 GB disk |
| **Hobby** | $5/month | 8 GB RAM, 8 vCPU, 100 GB disk |
| **Pro** | $20/month per seat | Team features, higher limits |

Usage-based charges apply on top of the base plan: compute at ~$0.000231/min per vCPU, memory at ~$0.000231/min per GB, network egress at $0.10/GB, and volume storage at $0.25/GB/month.

A typical single-user LinkDen instance fits comfortably on the **Hobby plan** ($5/month). The Trial plan's free credit may cover light usage.

## Troubleshooting

### Build fails

- Check the build logs for specific errors
- Ensure `Dockerfile.api` and `Dockerfile.web` exist in the repo root
- Verify all build arguments are set

### "502 Bad Gateway"

- Make sure the `PORT` variable matches the port your app listens on
- Check deploy logs for startup errors

### Database resets on redeployment

- Ensure a persistent volume is attached at `/data`
- Verify `DATABASE_URL=file:/data/linkden.db`

### CORS errors

- `CORS_ORIGIN` must exactly match the web app URL (including `https://`, no trailing slash)
- After switching to a custom domain, update `CORS_ORIGIN` and redeploy the API

### Custom domain shows "DNS not configured"

- Verify the CNAME record at your DNS provider
- Wait for propagation (usually minutes, can take up to 48 hours)
- Make sure the CNAME target matches what Railway shows in the dashboard
